import{i as S,D as p,r as v,o as a,c as d,L,d as c,b as y,t as f,f as s,$ as w,l as g,F as i,w as h,e as $,a as q,R as V,a7 as E}from"./entry.0a92484f.js";import{u as T}from"./root.dae782a6.js";import"./query.16828b1f.js";import"./preview.befd0c73.js";const D=/^[-' a-zA-ZàâéêèìôùûçáéíóúäëïöüÄ'陳大文łŁőŐűŰZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹßÇŒÆČŠŽ.âê都道府県Федерацииআবাসযোগ্য জমির걸쳐 있는]*$/,x=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,Z=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})?$/,z=e=>(console.log("required",e!=null&&e!==!1&&(Array.isArray(e)||typeof e=="string"?e.length>0:!0)),e!=null&&e!==!1&&(Array.isArray(e)||typeof e=="string"?e.length>0:!0)),G=e=>!e||D.test(e),J=e=>t=>(console.log("min",e),!t||t.length>=e),K=e=>t=>!t||t.length<=e,M=e=>!e||e.length>0&&x.test(e),U=e=>!e||e.length>0&&emailRegex.test(e),H=e=>!e||e.length>0&&Z.test(e),P=(e,t)=>{var o,r;if(console.log("visibilityRules: ",e),!(e!=null&&e.default))return!0;let n=!!e.default;return((o=e==null?void 0:e.switchIf)==null?void 0:o.length)>0&&((r=e==null?void 0:e.switchIf)==null||r.map(l=>{n=l})),console.log("result: ",n),n},Q=e=>{var o;const t=S().$i18n.t;if(!(e!=null&&e.rules))return[];const n=[];return((o=Object.keys(e==null?void 0:e.rules))==null?void 0:o.length)>0&&Object.keys(e==null?void 0:e.rules).forEach(r=>{r==="required"&&n.push(l=>z(l)||t("rules.required")),r==="min"&&n.push(l=>!!J(e.rules[r])(l)||t("rules.at-least-0-characters",[e.rules[r]])),r==="max"&&n.push(l=>!!K(e.rules[r])(l)||t("rules.max-0-characters",[e.rules[r]])),r==="email"&&n.push(l=>!!U(l)||t("rules.invalid-e-mail")),r==="url"&&n.push(l=>!!M(l)||t("rules.invalid-url")),r==="alpha"&&n.push(l=>!!G(l)||t("rules.numbers-and-special-characters-not-allowed")),r==="yt"&&n.push(l=>!!H(l)||t("rules.invalid-youtube-url"))}),n},R=["id"],W={key:0,class:"d-flex justify-end mb-3"},X={__name:"RecursiveFormblock",props:{type:{type:String,required:!0,default:()=>""},input:{type:Object,required:!0,default:()=>({})},rootIndex:{type:Number,required:!1,default:()=>0},level:{type:Array,required:!0},saving:{type:Boolean,required:!0},collectionMode:{type:Boolean,required:!1,default:!1}},setup(e){const t=e,n=T(),o=n.getKey({key:t.input.key,level:t.level,store:n[t.type].form}),r=u=>(console.log("item: ",u),Array.isArray(u)),l=p(t.level.at(-1)),F=()=>t.level.length>2&&typeof t.level[t.level.length-2]=="number"?t.level.slice(0,-2).join(""):t.level.slice(0,-1).join("");return(u,b)=>{const A=v("v-btn"),I=X,O=v("RecursiveFormblock",!0),B=v("v-spacer");return a(),d(E,{to:e.level.length>1?"#form"+F():"#container"},[L("div",{id:"form"+e.level.join()},[e.input.items?r(e.input.items)?(a(),c(i,{key:1},[y(" COLLECTION level: "+f(e.level)+" ",1),s(o)&&s(o).length>0?(a(),d(w(e.input.type),{key:0,item:e.input,args:{...e.input,key:s(l),type:e.type},level:e.level},{default:h(()=>[(a(!0),c(i,null,$(s(o),(j,m)=>(a(),c(i,{key:"form"+e.level.join()+m},[(a(!0),c(i,null,$(e.input.items,(k,C)=>(a(),d(I,{key:"form"+e.level.join()+C+m,input:k,type:e.type,level:[...e.level,m,k.key],saving:e.saving},{default:h(()=>[C===e.input.items.length-1?(a(),c("div",W,[q(A,{"prepend-icon":"mdi-delete",onClick:N=>s(n).deleteFormItem({key:s(l),type:t.type,level:[...t.level,m]})},{default:h(()=>[y(f(u.$t("delete")),1)]),_:2},1032,["onClick"]),m===s(o).length-1?(a(),d(A,{key:0,"prepend-icon":"mdi-plus",onClick:b[0]||(b[0]=N=>s(n).addFormItem({key:s(l),type:t.type,level:t.level}))},{default:h(()=>[y(f(u.$t("add")),1)]),_:1})):g("",!0)])):g("",!0)]),_:2},1032,["input","type","level","saving"]))),128))],64))),128))]),_:1},8,["item","args","level"])):g("",!0)],64)):(a(),c(i,{key:2},[y(" OBJECT level: "+f(e.level)+" ",1),e.input.items&&Object.keys(e.input.items)&&Object.keys(e.input.items).length>0?(a(),d(w(e.input.type),{key:u.index,item:e.input,args:{...e.input,key:u.key,type:e.type}},{default:h(()=>[(a(!0),c(i,null,$(e.input.items,(j,m,k)=>(a(),d(O,{input:j,type:e.type,level:[...e.level,m],saving:e.saving},null,8,["input","type","level","saving"]))),256))]),_:1},8,["item","args"])):g("",!0)],64)):(a(),c(i,{key:0},[y(" level: "+f(e.level)+" ",1),s(P)(e.input)?(a(),d(w("FormAtoms"+e.input.type),{key:0,label:u.$t(e.input.label)||s(l),readonly:e.saving,args:{...e.input,key:s(l),type:e.type},hint:e.input.description||!1,rules:s(Q)(e.input),level:e.level,clearable:e.input.clearable||!1},null,8,["label","readonly","args","hint","rules","level","clearable"])):g("",!0)],64))],8,R),q(B),y(),V(u.$slots,"default")],8,["to"])}}};export{X as default};
